<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>LoanCardControllerTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Ezloans-spring (02-Oct-2023 5:06:51 pm)</a> &gt; <a href="../../index.html" class="el_group">Ezloans-spring</a> &gt; <a href="../index.html" class="el_bundle">src/test/java</a> &gt; <a href="index.source.html" class="el_package">com.wellsfargo.training.ezloans.controller</a> &gt; <span class="el_source">LoanCardControllerTest.java</span></div><h1>LoanCardControllerTest.java</h1><pre class="source lang-java linenums">package com.wellsfargo.training.ezloans.controller;

import static org.junit.jupiter.api.Assertions.*;
import static org.mockito.ArgumentMatchers.any;
import static org.mockito.Mockito.doNothing;
import static org.mockito.Mockito.times;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Map;
import java.util.Optional;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.mock.mockito.MockBean;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;

import com.wellsfargo.training.ezloans.exception.ResourceNotFoundException;
import com.wellsfargo.training.ezloans.model.Employee;
import com.wellsfargo.training.ezloans.model.EmployeeCard;
import com.wellsfargo.training.ezloans.model.LoanCard;
import com.wellsfargo.training.ezloans.service.LoanCardService;

@DisplayName(&quot;Loan Card Controller tests&quot;)
@SpringBootTest
<span class="fc" id="L36">class LoanCardControllerTest {</span>
	
	@Autowired
	private LoanCardController loanCardController;
	
	LoanCard lc;
	/*
	 * We can use the @MockBean to add mock objects to the Spring application context.
	 *  The mock will replace any existing bean of the same type in the application context.
	 */
	@MockBean
	private LoanCardService lservice;
	
	/*
	 * @BeforeEach - Use to run a common code before ( eg setUp) each test method execution.
	 */
	@BeforeEach
	void setUp() throws Exception {
<span class="fc" id="L54">		lc = new LoanCard();</span>
<span class="fc" id="L55">	}</span>

	/*
	 * @AfterEach - Use to run a common code after ( eg tearDown) each test method execution. 
	 */
	@AfterEach
	void tearDown() throws Exception {
<span class="fc" id="L62">		lc = null;</span>
<span class="fc" id="L63">	}</span>

	//This function is used to test add loan card function.
	@Test
	void testAddLoanCard() throws ParseException {
<span class="fc" id="L68">		lc.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L69">		lc.setDuration(5);</span>
		
<span class="fc" id="L71">		EmployeeCard ec = new EmployeeCard();</span>
<span class="fc" id="L72">		Employee e = new Employee();</span>
		
<span class="fc" id="L74">		e.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L75">	    e.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L76">	    e.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L77">	    e.setGender(&quot;male&quot;);</span>
<span class="fc" id="L78">	    e.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L79">	    e.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L81">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L82">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L83">	    e.setDob(dob);</span>
<span class="fc" id="L84">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L85">	    e.setDoj(doj);</span>
<span class="fc" id="L86">	    e.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L88">	    ec.setEmployee(e);</span>
<span class="fc" id="L89">	    ec.setLoanId(lc);</span>
<span class="fc" id="L90">	    ec.setIssueDate(doj);</span>
	    
<span class="fc" id="L92">	    List&lt;EmployeeCard&gt; ecs = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L93">	    ecs.add(ec);</span>
	    
<span class="fc" id="L95">	    lc.setEmployeeCard(ecs);</span>
	    
<span class="fc" id="L97">	    when(lservice.addLoanCard(any(LoanCard.class))).thenReturn(lc);</span>
		
<span class="fc" id="L99">		ResponseEntity&lt;String&gt; re=loanCardController.addLoanCard(lc);</span>
		
<span class="fc" id="L101">		assertEquals(HttpStatus.OK, re.getStatusCode());</span>
<span class="fc" id="L102">		assertEquals(&quot;Loan Card added Successfully&quot;, re.getBody());</span>
		
<span class="fc" id="L104">		verify(lservice, times(1)).addLoanCard(any(LoanCard.class));</span>
		
<span class="fc" id="L106">	}</span>
	
	//This function is used to test add loan card function else method when object not created.
	@Test
	void testAddLoanCard_Else() throws ParseException {
<span class="fc" id="L111">		lc.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L112">		lc.setDuration(5);</span>
		
<span class="fc" id="L114">		EmployeeCard ec = new EmployeeCard();</span>
<span class="fc" id="L115">		Employee e = new Employee();</span>
		
<span class="fc" id="L117">		e.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L118">	    e.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L119">	    e.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L120">	    e.setGender(&quot;male&quot;);</span>
<span class="fc" id="L121">	    e.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L122">	    e.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L124">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L125">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L126">	    e.setDob(dob);</span>
<span class="fc" id="L127">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L128">	    e.setDoj(doj);</span>
<span class="fc" id="L129">	    e.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L131">	    ec.setEmployee(e);</span>
<span class="fc" id="L132">	    ec.setLoanId(lc);</span>
<span class="fc" id="L133">	    ec.setIssueDate(doj);</span>
	    
<span class="fc" id="L135">	    List&lt;EmployeeCard&gt; ecs = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L136">	    ecs.add(ec);</span>
	    
<span class="fc" id="L138">	    lc.setEmployeeCard(ecs);</span>
<span class="fc" id="L139">	    when(lservice.addLoanCard(any(LoanCard.class))).thenReturn(null);</span>
	    
<span class="fc" id="L141">	    ResponseEntity&lt;String&gt; re=loanCardController.addLoanCard(lc);</span>
		
<span class="fc" id="L143">		assertEquals(HttpStatus.BAD_REQUEST, re.getStatusCode());</span>
<span class="fc" id="L144">		assertEquals(&quot;Failed to add Loan Card&quot;, re.getBody());</span>
		
<span class="fc" id="L146">		verify(lservice, times(1)).addLoanCard(any(LoanCard.class));</span>

<span class="fc" id="L148">	}</span>
	
	//This function is used to test add loan card function when method throws an exception.
	@Test
	void testAddLoanCard_fail() throws ParseException {
<span class="fc" id="L153">		lc.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L154">		lc.setDuration(5);</span>
		
<span class="fc" id="L156">		EmployeeCard ec = new EmployeeCard();</span>
<span class="fc" id="L157">		Employee e = new Employee();</span>
		
<span class="fc" id="L159">		e.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L160">	    e.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L161">	    e.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L162">	    e.setGender(&quot;male&quot;);</span>
<span class="fc" id="L163">	    e.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L164">	    e.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L166">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L167">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L168">	    e.setDob(dob);</span>
<span class="fc" id="L169">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L170">	    e.setDoj(doj);</span>
<span class="fc" id="L171">	    e.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L173">	    ec.setEmployee(e);</span>
<span class="fc" id="L174">	    ec.setLoanId(lc);</span>
<span class="fc" id="L175">	    ec.setIssueDate(doj);</span>
	    
<span class="fc" id="L177">	    List&lt;EmployeeCard&gt; ecs = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L178">	    ecs.add(ec);</span>
	    
<span class="fc" id="L180">	    lc.setEmployeeCard(ecs);</span>
<span class="fc" id="L181">	    Exception ex = new IllegalStateException();</span>
<span class="fc" id="L182">	    when(lservice.addLoanCard(any(LoanCard.class))).thenThrow(ex);</span>
	    
<span class="fc" id="L184">	    ResponseEntity&lt;String&gt; re=loanCardController.addLoanCard(lc);</span>
	    
<span class="fc" id="L186">	    assertEquals(HttpStatus.INTERNAL_SERVER_ERROR, re.getStatusCode());</span>
<span class="fc" id="L187">	    assertEquals(&quot;An Error has Occured: &quot;+ex.getMessage(), re.getBody());</span>
	    
<span class="fc" id="L189">	    verify(lservice, times(1)).addLoanCard(any(LoanCard.class));</span>
<span class="fc" id="L190">	}</span>

	//This function is used to get all loan cards function.
	@Test
	void testGetAllloancards() throws ParseException {
<span class="fc" id="L195">		LoanCard lc1 = new LoanCard();</span>
<span class="fc" id="L196">		LoanCard lc2 = new LoanCard();</span>
		
<span class="fc" id="L198">		lc1.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L199">		lc1.setDuration(5);</span>
		
<span class="fc" id="L201">		EmployeeCard ec1 = new EmployeeCard();</span>
<span class="fc" id="L202">		Employee e1 = new Employee();</span>
		
<span class="fc" id="L204">		e1.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L205">	    e1.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L206">	    e1.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L207">	    e1.setGender(&quot;male&quot;);</span>
<span class="fc" id="L208">	    e1.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L209">	    e1.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L211">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L212">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L213">	    e1.setDob(dob);</span>
<span class="fc" id="L214">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L215">	    e1.setDoj(doj);</span>
<span class="fc" id="L216">	    e1.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L218">	    ec1.setEmployee(e1);</span>
<span class="fc" id="L219">	    ec1.setLoanId(lc1);</span>
<span class="fc" id="L220">	    ec1.setIssueDate(doj);</span>
	    
<span class="fc" id="L222">	    List&lt;EmployeeCard&gt; ecs1 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L223">	    ecs1.add(ec1);</span>
	    
<span class="fc" id="L225">	    lc1.setEmployeeCard(ecs1);</span>
	    
<span class="fc" id="L227">	    lc2.setType(&quot;Furniture&quot;);</span>
<span class="fc" id="L228">		lc2.setDuration(3);</span>
		
<span class="fc" id="L230">		EmployeeCard ec2 = new EmployeeCard();</span>
<span class="fc" id="L231">		Employee e2 = new Employee();</span>
		
<span class="fc" id="L233">		e2.setEmail(&quot;anubhav@example.com&quot;);</span>
<span class="fc" id="L234">	    e2.setFname(&quot;anubhav&quot;);</span>
<span class="fc" id="L235">	    e2.setLname(&quot;rajput&quot;);</span>
<span class="fc" id="L236">	    e2.setGender(&quot;male&quot;);</span>
<span class="fc" id="L237">	    e2.setDepartment(&quot;TCOO&quot;);</span>
<span class="fc" id="L238">	    e2.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L240">	    SimpleDateFormat df2 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L241">	    Date dob2=new Date(df2.parse(&quot;2001-04-18&quot;).getTime());</span>
<span class="fc" id="L242">	    e2.setDob(dob2);</span>
<span class="fc" id="L243">	    Date doj2=new Date(df2.parse(&quot;2023-07-21&quot;).getTime());</span>
<span class="fc" id="L244">	    e2.setDoj(doj2);</span>
<span class="fc" id="L245">	    e2.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L247">	    ec2.setEmployee(e2);</span>
<span class="fc" id="L248">	    ec2.setLoanId(lc2);</span>
<span class="fc" id="L249">	    ec2.setIssueDate(doj);</span>
	    
<span class="fc" id="L251">	    List&lt;EmployeeCard&gt; ecs2 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L252">	    ecs2.add(ec2);</span>
	    
<span class="fc" id="L254">	    lc2.setEmployeeCard(ecs2);</span>
	    
<span class="fc" id="L256">	    List&lt;LoanCard&gt; list = new ArrayList&lt;LoanCard&gt;();</span>
<span class="fc" id="L257">	    list.add(lc1);</span>
<span class="fc" id="L258">	    list.add(lc2);</span>
	    
<span class="fc" id="L260">	    when(lservice.listAll()).thenReturn(list);</span>
	    
<span class="fc" id="L262">	    ResponseEntity&lt;List&lt;LoanCard&gt;&gt; re = loanCardController.getAllloancards();</span>
	    
<span class="fc" id="L264">	    assertEquals(2, re.getBody().size());</span>
<span class="fc" id="L265">	    assertEquals(&quot;Crockery&quot;, re.getBody().get(0).getType());</span>
<span class="fc" id="L266">	    assertEquals(&quot;Furniture&quot;, re.getBody().get(1).getType());</span>
	    
<span class="fc" id="L268">	    verify(lservice, times(1)).listAll();</span>
	    
	    
<span class="fc" id="L271">	}</span>
	
	//This function is used to get all loan cards function in case of an exception.
	@Test
	void testGetAllloancards_fail() throws ParseException{
<span class="fc" id="L276">		LoanCard lc1 = new LoanCard();</span>
<span class="fc" id="L277">		LoanCard lc2 = new LoanCard();</span>
		
<span class="fc" id="L279">		lc1.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L280">		lc1.setDuration(5);</span>
		
<span class="fc" id="L282">		EmployeeCard ec1 = new EmployeeCard();</span>
<span class="fc" id="L283">		Employee e1 = new Employee();</span>
		
<span class="fc" id="L285">		e1.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L286">	    e1.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L287">	    e1.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L288">	    e1.setGender(&quot;male&quot;);</span>
<span class="fc" id="L289">	    e1.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L290">	    e1.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L292">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L293">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L294">	    e1.setDob(dob);</span>
<span class="fc" id="L295">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L296">	    e1.setDoj(doj);</span>
<span class="fc" id="L297">	    e1.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L299">	    ec1.setEmployee(e1);</span>
<span class="fc" id="L300">	    ec1.setLoanId(lc1);</span>
<span class="fc" id="L301">	    ec1.setIssueDate(doj);</span>
	    
<span class="fc" id="L303">	    List&lt;EmployeeCard&gt; ecs1 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L304">	    ecs1.add(ec1);</span>
	    
<span class="fc" id="L306">	    lc1.setEmployeeCard(ecs1);</span>
	    
<span class="fc" id="L308">	    lc2.setType(&quot;Furniture&quot;);</span>
<span class="fc" id="L309">		lc2.setDuration(3);</span>
		
<span class="fc" id="L311">		EmployeeCard ec2 = new EmployeeCard();</span>
<span class="fc" id="L312">		Employee e2 = new Employee();</span>
		
<span class="fc" id="L314">		e2.setEmail(&quot;anubhav@example.com&quot;);</span>
<span class="fc" id="L315">	    e2.setFname(&quot;anubhav&quot;);</span>
<span class="fc" id="L316">	    e2.setLname(&quot;rajput&quot;);</span>
<span class="fc" id="L317">	    e2.setGender(&quot;male&quot;);</span>
<span class="fc" id="L318">	    e2.setDepartment(&quot;TCOO&quot;);</span>
<span class="fc" id="L319">	    e2.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L321">	    SimpleDateFormat df2 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L322">	    Date dob2=new Date(df2.parse(&quot;2001-04-18&quot;).getTime());</span>
<span class="fc" id="L323">	    e2.setDob(dob2);</span>
<span class="fc" id="L324">	    Date doj2=new Date(df2.parse(&quot;2023-07-21&quot;).getTime());</span>
<span class="fc" id="L325">	    e2.setDoj(doj2);</span>
<span class="fc" id="L326">	    e2.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L328">	    ec2.setEmployee(e2);</span>
<span class="fc" id="L329">	    ec2.setLoanId(lc2);</span>
<span class="fc" id="L330">	    ec2.setIssueDate(doj);</span>
	    
<span class="fc" id="L332">	    List&lt;EmployeeCard&gt; ecs2 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L333">	    ecs2.add(ec2);</span>
	    
<span class="fc" id="L335">	    lc2.setEmployeeCard(ecs2);</span>
	    
<span class="fc" id="L337">	    List&lt;LoanCard&gt; list = new ArrayList&lt;LoanCard&gt;();</span>
<span class="fc" id="L338">	    list.add(lc1);</span>
<span class="fc" id="L339">	    list.add(lc2);</span>
	    
<span class="fc" id="L341">	    Exception ex = new IllegalStateException();</span>
<span class="fc" id="L342">	    when(lservice.listAll()).thenThrow(ex);</span>
	    
<span class="fc" id="L344">	    ResponseEntity&lt;List&lt;LoanCard&gt;&gt; re = loanCardController.getAllloancards();</span>
	    
<span class="fc" id="L346">	    assertEquals(HttpStatus.INTERNAL_SERVER_ERROR, re.getStatusCode());</span>
<span class="fc" id="L347">	    assertNull(re.getBody());</span>
	    
<span class="fc" id="L349">	    verify(lservice, times(1)).listAll();</span>
<span class="fc" id="L350">	}</span>

	//This function is used to get loan card by an id function.
	@Test
	void testGetLoanCardById() throws ParseException, ResourceNotFoundException {
<span class="fc" id="L355">		lc.setLoanId(1L);</span>
<span class="fc" id="L356">		lc.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L357">		lc.setDuration(5);</span>
		
<span class="fc" id="L359">		EmployeeCard ec = new EmployeeCard();</span>
<span class="fc" id="L360">		Employee e = new Employee();</span>
		
<span class="fc" id="L362">		e.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L363">	    e.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L364">	    e.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L365">	    e.setGender(&quot;male&quot;);</span>
<span class="fc" id="L366">	    e.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L367">	    e.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L369">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L370">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L371">	    e.setDob(dob);</span>
<span class="fc" id="L372">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L373">	    e.setDoj(doj);</span>
<span class="fc" id="L374">	    e.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L376">	    ec.setEmployee(e);</span>
<span class="fc" id="L377">	    ec.setLoanId(lc);</span>
<span class="fc" id="L378">	    ec.setIssueDate(doj);</span>
	    
<span class="fc" id="L380">	    List&lt;EmployeeCard&gt; ecs = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L381">	    ecs.add(ec);</span>
	    
<span class="fc" id="L383">	    lc.setEmployeeCard(ecs);</span>
	    
<span class="fc" id="L385">	    when(lservice.getSingleLoanCard(1L)).thenReturn(Optional.of(lc));</span>
	    
<span class="fc" id="L387">	    ResponseEntity&lt;LoanCard&gt; re = loanCardController.getLoanCardById(1L);</span>
	    
<span class="fc" id="L389">	    assertEquals(HttpStatus.OK, re.getStatusCode());</span>
<span class="fc" id="L390">	    assertEquals(&quot;Crockery&quot;, re.getBody().getType());</span>
<span class="fc" id="L391">	    assertEquals(5, re.getBody().getDuration());</span>
	    
<span class="fc" id="L393">	    verify(lservice, times(1)).getSingleLoanCard(1L);</span>
	    
	    
<span class="fc" id="L396">	}</span>
	
	//This function is used to get loan card by an id function in case of an exception.
	@Test
	void testGetLoanCardById_fail() throws ParseException, ResourceNotFoundException {
<span class="fc" id="L401">		lc.setLoanId(1L);</span>
<span class="fc" id="L402">		lc.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L403">		lc.setDuration(5);</span>
		
<span class="fc" id="L405">		EmployeeCard ec = new EmployeeCard();</span>
<span class="fc" id="L406">		Employee e = new Employee();</span>
		
<span class="fc" id="L408">		e.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L409">	    e.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L410">	    e.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L411">	    e.setGender(&quot;male&quot;);</span>
<span class="fc" id="L412">	    e.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L413">	    e.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L415">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L416">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L417">	    e.setDob(dob);</span>
<span class="fc" id="L418">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L419">	    e.setDoj(doj);</span>
<span class="fc" id="L420">	    e.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L422">	    ec.setEmployee(e);</span>
<span class="fc" id="L423">	    ec.setLoanId(lc);</span>
<span class="fc" id="L424">	    ec.setIssueDate(doj);</span>
	    
<span class="fc" id="L426">	    List&lt;EmployeeCard&gt; ecs = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L427">	    ecs.add(ec);</span>
	    
<span class="fc" id="L429">	    lc.setEmployeeCard(ecs);</span>
<span class="fc" id="L430">	    when(lservice.getSingleLoanCard(1L)).thenReturn(Optional.empty());</span>
	    try {
<span class="nc" id="L432">	    	ResponseEntity&lt;LoanCard&gt; re = loanCardController.getLoanCardById(1L);</span>
<span class="nc" id="L433">	    }</span>
<span class="fc" id="L434">	    catch (Exception ex) {</span>
<span class="fc" id="L435">	    	assertEquals(&quot;LoanCard not found for this id&quot;+lc.getLoanId() ,ex.getMessage());</span>
	    }
	    
<span class="fc" id="L438">	    verify(lservice, times(1)).getSingleLoanCard(1L);</span>
	    
<span class="fc" id="L440">	}</span>

	//This function is used to update loan card function.
	@Test
	void testUpdateLoanCard() throws ParseException, ResourceNotFoundException {
<span class="fc" id="L445">		LoanCard lc1 = new LoanCard();</span>
<span class="fc" id="L446">		LoanCard lc2 = new LoanCard();</span>
		
<span class="fc" id="L448">		lc1.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L449">		lc1.setDuration(5);</span>
		
<span class="fc" id="L451">		EmployeeCard ec1 = new EmployeeCard();</span>
<span class="fc" id="L452">		Employee e1 = new Employee();</span>
		
<span class="fc" id="L454">		e1.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L455">	    e1.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L456">	    e1.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L457">	    e1.setGender(&quot;male&quot;);</span>
<span class="fc" id="L458">	    e1.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L459">	    e1.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L461">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L462">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L463">	    e1.setDob(dob);</span>
<span class="fc" id="L464">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L465">	    e1.setDoj(doj);</span>
<span class="fc" id="L466">	    e1.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L468">	    ec1.setEmployee(e1);</span>
<span class="fc" id="L469">	    ec1.setLoanId(lc1);</span>
<span class="fc" id="L470">	    ec1.setIssueDate(doj);</span>
	    
<span class="fc" id="L472">	    List&lt;EmployeeCard&gt; ecs1 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L473">	    ecs1.add(ec1);</span>
	    
<span class="fc" id="L475">	    lc1.setEmployeeCard(ecs1);</span>
	    
<span class="fc" id="L477">	    lc2.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L478">		lc2.setDuration(3);</span>
<span class="fc" id="L479">		lc2.setEmployeeCard(ecs1);</span>
		
<span class="fc" id="L481">		lc1.setLoanId(1L);</span>
		
<span class="fc" id="L483">		when(lservice.getSingleLoanCard(1L)).thenReturn(Optional.of(lc1));</span>
<span class="fc" id="L484">		when(lservice.addLoanCard(any(LoanCard.class))).thenReturn(lc2);</span>
		
<span class="fc" id="L486">		ResponseEntity&lt;LoanCard&gt; re = loanCardController.updateLoanCard(1L, lc2);</span>
		
<span class="fc" id="L488">		assertEquals(&quot;Crockery&quot;, re.getBody().getType());</span>
<span class="fc" id="L489">		assertEquals(3, re.getBody().getDuration());</span>
		
<span class="fc" id="L491">		verify(lservice, times(1)).getSingleLoanCard(1L);</span>
<span class="fc" id="L492">		verify(lservice, times(1)).addLoanCard(any(LoanCard.class));</span>
	    
	    
	    
<span class="fc" id="L496">	}</span>
	
	//This function is used to update loan card in case of an exception.
	@Test
	void testUpdateLoanCard_fail() throws ParseException, ResourceNotFoundException {
<span class="fc" id="L501">		LoanCard lc1 = new LoanCard();</span>
<span class="fc" id="L502">		LoanCard lc2 = new LoanCard();</span>
		
<span class="fc" id="L504">		lc1.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L505">		lc1.setDuration(5);</span>
		
<span class="fc" id="L507">		EmployeeCard ec1 = new EmployeeCard();</span>
<span class="fc" id="L508">		Employee e1 = new Employee();</span>
		
<span class="fc" id="L510">		e1.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L511">	    e1.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L512">	    e1.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L513">	    e1.setGender(&quot;male&quot;);</span>
<span class="fc" id="L514">	    e1.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L515">	    e1.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L517">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L518">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L519">	    e1.setDob(dob);</span>
<span class="fc" id="L520">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L521">	    e1.setDoj(doj);</span>
<span class="fc" id="L522">	    e1.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L524">	    ec1.setEmployee(e1);</span>
<span class="fc" id="L525">	    ec1.setLoanId(lc1);</span>
<span class="fc" id="L526">	    ec1.setIssueDate(doj);</span>
	    
<span class="fc" id="L528">	    List&lt;EmployeeCard&gt; ecs1 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L529">	    ecs1.add(ec1);</span>
	    
<span class="fc" id="L531">	    lc1.setEmployeeCard(ecs1);</span>
	    
<span class="fc" id="L533">	    lc2.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L534">		lc2.setDuration(3);</span>
<span class="fc" id="L535">		lc2.setEmployeeCard(ecs1);</span>
		
<span class="fc" id="L537">		lc1.setLoanId(1L);</span>
		
<span class="fc" id="L539">		when(lservice.getSingleLoanCard(1L)).thenReturn(Optional.empty());</span>
		
		try {
<span class="nc" id="L542">			ResponseEntity&lt;LoanCard&gt; re = loanCardController.updateLoanCard(1L, lc2);</span>
<span class="nc" id="L543">		}</span>
<span class="fc" id="L544">		catch(Exception ex) {</span>
<span class="fc" id="L545">			assertEquals(&quot;LoanCard not found for this id&quot;+lc1.getLoanId() ,ex.getMessage());</span>
		}
		
<span class="fc" id="L548">		verify(lservice, times(1)).getSingleLoanCard(1L);</span>
<span class="fc" id="L549">	}</span>

	//This function is used to delete loan card.
	@Test
	void testDeleteLoanCard() throws ParseException, ResourceNotFoundException {
<span class="fc" id="L554">		lc.setLoanId(1L);</span>
<span class="fc" id="L555">		lc.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L556">		lc.setDuration(5);</span>
		
<span class="fc" id="L558">		EmployeeCard ec = new EmployeeCard();</span>
<span class="fc" id="L559">		Employee e = new Employee();</span>
		
<span class="fc" id="L561">		e.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L562">	    e.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L563">	    e.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L564">	    e.setGender(&quot;male&quot;);</span>
<span class="fc" id="L565">	    e.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L566">	    e.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L568">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L569">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L570">	    e.setDob(dob);</span>
<span class="fc" id="L571">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L572">	    e.setDoj(doj);</span>
<span class="fc" id="L573">	    e.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L575">	    ec.setEmployee(e);</span>
<span class="fc" id="L576">	    ec.setLoanId(lc);</span>
<span class="fc" id="L577">	    ec.setIssueDate(doj);</span>
	    
<span class="fc" id="L579">	    List&lt;EmployeeCard&gt; ecs = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L580">	    ecs.add(ec);</span>
	    
<span class="fc" id="L582">	    lc.setEmployeeCard(ecs);</span>
	    
<span class="fc" id="L584">	    when(lservice.getSingleLoanCard(1L)).thenReturn(Optional.of(lc));</span>
<span class="fc" id="L585">	    doNothing().when(lservice).deleteLoanCard(1L);</span>
	    
<span class="fc" id="L587">	    ResponseEntity&lt;Map&lt;String, Boolean&gt;&gt; re = loanCardController.deleteLoanCard(1L);</span>
	    
<span class="fc" id="L589">	    assertTrue(re.getBody().containsKey(&quot;Deleted&quot;));</span>
<span class="fc" id="L590">		assertTrue(re.getBody().get(&quot;Deleted&quot;));</span>
		
<span class="fc" id="L592">		verify(lservice, times(1)).getSingleLoanCard(1L);</span>
<span class="fc" id="L593">		verify(lservice, times(1)).deleteLoanCard(1L);</span>
	    
<span class="fc" id="L595">	}</span>
	
	//This function is used to delete loan card n case of an exception.
	@Test
	void testDeleteLoanCard_fail() throws ParseException, ResourceNotFoundException {
<span class="fc" id="L600">		lc.setLoanId(1L);</span>
<span class="fc" id="L601">		lc.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L602">		lc.setDuration(5);</span>
		
<span class="fc" id="L604">		EmployeeCard ec = new EmployeeCard();</span>
<span class="fc" id="L605">		Employee e = new Employee();</span>
		
<span class="fc" id="L607">		e.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L608">	    e.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L609">	    e.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L610">	    e.setGender(&quot;male&quot;);</span>
<span class="fc" id="L611">	    e.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L612">	    e.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L614">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L615">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L616">	    e.setDob(dob);</span>
<span class="fc" id="L617">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L618">	    e.setDoj(doj);</span>
<span class="fc" id="L619">	    e.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L621">	    ec.setEmployee(e);</span>
<span class="fc" id="L622">	    ec.setLoanId(lc);</span>
<span class="fc" id="L623">	    ec.setIssueDate(doj);</span>
	    
<span class="fc" id="L625">	    List&lt;EmployeeCard&gt; ecs = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L626">	    ecs.add(ec);</span>
	    
<span class="fc" id="L628">	    lc.setEmployeeCard(ecs);</span>
	    
<span class="fc" id="L630">	    when(lservice.getSingleLoanCard(1L)).thenReturn(Optional.empty());</span>
	    
	    try {
<span class="nc" id="L633">	    	ResponseEntity&lt;Map&lt;String, Boolean&gt;&gt; re = loanCardController.deleteLoanCard(1L);</span>
<span class="nc" id="L634">	    }</span>
<span class="fc" id="L635">	    catch(Exception ex) {</span>
<span class="fc" id="L636">	    	assertEquals(&quot;LoanCard not found for this Id: &quot;+lc.getLoanId() ,ex.getMessage());</span>
	    }
	    
<span class="fc" id="L639">	    verify(lservice, times(1)).getSingleLoanCard(1L);</span>
	    
<span class="fc" id="L641">	}</span>
	
	//This function is used to get loan card types function.
	@Test
	void getLoanCardTypesTest() throws ParseException {
<span class="fc" id="L646">		LoanCard lc1 = new LoanCard();</span>
<span class="fc" id="L647">		LoanCard lc2 = new LoanCard();</span>
		
<span class="fc" id="L649">		lc1.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L650">		lc1.setDuration(5);</span>
		
<span class="fc" id="L652">		EmployeeCard ec1 = new EmployeeCard();</span>
<span class="fc" id="L653">		Employee e1 = new Employee();</span>
		
<span class="fc" id="L655">		e1.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L656">	    e1.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L657">	    e1.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L658">	    e1.setGender(&quot;male&quot;);</span>
<span class="fc" id="L659">	    e1.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L660">	    e1.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L662">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L663">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L664">	    e1.setDob(dob);</span>
<span class="fc" id="L665">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L666">	    e1.setDoj(doj);</span>
<span class="fc" id="L667">	    e1.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L669">	    ec1.setEmployee(e1);</span>
<span class="fc" id="L670">	    ec1.setLoanId(lc1);</span>
<span class="fc" id="L671">	    ec1.setIssueDate(doj);</span>
	    
<span class="fc" id="L673">	    List&lt;EmployeeCard&gt; ecs1 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L674">	    ecs1.add(ec1);</span>
	    
<span class="fc" id="L676">	    lc1.setEmployeeCard(ecs1);</span>
	    
<span class="fc" id="L678">	    lc2.setType(&quot;Furniture&quot;);</span>
<span class="fc" id="L679">		lc2.setDuration(3);</span>
		
<span class="fc" id="L681">		EmployeeCard ec2 = new EmployeeCard();</span>
<span class="fc" id="L682">		Employee e2 = new Employee();</span>
		
<span class="fc" id="L684">		e2.setEmail(&quot;anubhav@example.com&quot;);</span>
<span class="fc" id="L685">	    e2.setFname(&quot;anubhav&quot;);</span>
<span class="fc" id="L686">	    e2.setLname(&quot;rajput&quot;);</span>
<span class="fc" id="L687">	    e2.setGender(&quot;male&quot;);</span>
<span class="fc" id="L688">	    e2.setDepartment(&quot;TCOO&quot;);</span>
<span class="fc" id="L689">	    e2.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L691">	    SimpleDateFormat df2 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L692">	    Date dob2=new Date(df2.parse(&quot;2001-04-18&quot;).getTime());</span>
<span class="fc" id="L693">	    e2.setDob(dob2);</span>
<span class="fc" id="L694">	    Date doj2=new Date(df2.parse(&quot;2023-07-21&quot;).getTime());</span>
<span class="fc" id="L695">	    e2.setDoj(doj2);</span>
<span class="fc" id="L696">	    e2.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L698">	    ec2.setEmployee(e2);</span>
<span class="fc" id="L699">	    ec2.setLoanId(lc2);</span>
<span class="fc" id="L700">	    ec2.setIssueDate(doj);</span>
	    
<span class="fc" id="L702">	    List&lt;EmployeeCard&gt; ecs2 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L703">	    ecs2.add(ec2);</span>
	    
<span class="fc" id="L705">	    lc2.setEmployeeCard(ecs2);</span>
	    
<span class="fc" id="L707">	    List&lt;LoanCard&gt; list = new ArrayList&lt;LoanCard&gt;();</span>
<span class="fc" id="L708">	    list.add(lc1);</span>
<span class="fc" id="L709">	    list.add(lc2);</span>
	    
<span class="fc" id="L711">	    List&lt;String&gt; typelist=new ArrayList&lt;&gt;();</span>
	    
<span class="fc" id="L713">	    typelist.add(&quot;Crockery&quot;);</span>
<span class="fc" id="L714">	    typelist.add(&quot;Furniture&quot;);</span>
	    
<span class="fc" id="L716">	    when(lservice.listAll()).thenReturn(list);</span>
	    
<span class="fc" id="L718">	    ResponseEntity&lt;List&lt;String&gt;&gt; re=loanCardController.getLoanCardTypes();</span>
	    
<span class="fc" id="L720">	    assertEquals(re.getStatusCode(), HttpStatus.OK);</span>
<span class="fc" id="L721">	    assertEquals(re.getBody(), typelist);</span>
	    
<span class="fc" id="L723">	    verify(lservice, times(1)).listAll();</span>
		
<span class="fc" id="L725">	}</span>
	
	//This function is used to get loan card types in case of an exception.
	@Test
	void getLoanCardTypesTest_Fail() throws ParseException {
<span class="fc" id="L730">		LoanCard lc1 = new LoanCard();</span>
<span class="fc" id="L731">		LoanCard lc2 = new LoanCard();</span>
		
<span class="fc" id="L733">		lc1.setType(&quot;Crockery&quot;);</span>
<span class="fc" id="L734">		lc1.setDuration(5);</span>
		
<span class="fc" id="L736">		EmployeeCard ec1 = new EmployeeCard();</span>
<span class="fc" id="L737">		Employee e1 = new Employee();</span>
		
<span class="fc" id="L739">		e1.setEmail(&quot;arpan@example.com&quot;);</span>
<span class="fc" id="L740">	    e1.setFname(&quot;arpan&quot;);</span>
<span class="fc" id="L741">	    e1.setLname(&quot;ghosh&quot;);</span>
<span class="fc" id="L742">	    e1.setGender(&quot;male&quot;);</span>
<span class="fc" id="L743">	    e1.setDepartment(&quot;CT&quot;);</span>
<span class="fc" id="L744">	    e1.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L746">	    SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L747">	    Date dob=new Date(df.parse(&quot;1985-01-01&quot;).getTime());</span>
<span class="fc" id="L748">	    e1.setDob(dob);</span>
<span class="fc" id="L749">	    Date doj=new Date(df.parse(&quot;2023-08-23&quot;).getTime());</span>
<span class="fc" id="L750">	    e1.setDoj(doj);</span>
<span class="fc" id="L751">	    e1.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L753">	    ec1.setEmployee(e1);</span>
<span class="fc" id="L754">	    ec1.setLoanId(lc1);</span>
<span class="fc" id="L755">	    ec1.setIssueDate(doj);</span>
	    
<span class="fc" id="L757">	    List&lt;EmployeeCard&gt; ecs1 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L758">	    ecs1.add(ec1);</span>
	    
<span class="fc" id="L760">	    lc1.setEmployeeCard(ecs1);</span>
	    
<span class="fc" id="L762">	    lc2.setType(&quot;Furniture&quot;);</span>
<span class="fc" id="L763">		lc2.setDuration(3);</span>
		
<span class="fc" id="L765">		EmployeeCard ec2 = new EmployeeCard();</span>
<span class="fc" id="L766">		Employee e2 = new Employee();</span>
		
<span class="fc" id="L768">		e2.setEmail(&quot;anubhav@example.com&quot;);</span>
<span class="fc" id="L769">	    e2.setFname(&quot;anubhav&quot;);</span>
<span class="fc" id="L770">	    e2.setLname(&quot;rajput&quot;);</span>
<span class="fc" id="L771">	    e2.setGender(&quot;male&quot;);</span>
<span class="fc" id="L772">	    e2.setDepartment(&quot;TCOO&quot;);</span>
<span class="fc" id="L773">	    e2.setDesignation(&quot;Program Associate&quot;);</span>
	    
<span class="fc" id="L775">	    SimpleDateFormat df2 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span>
<span class="fc" id="L776">	    Date dob2=new Date(df2.parse(&quot;2001-04-18&quot;).getTime());</span>
<span class="fc" id="L777">	    e2.setDob(dob2);</span>
<span class="fc" id="L778">	    Date doj2=new Date(df2.parse(&quot;2023-07-21&quot;).getTime());</span>
<span class="fc" id="L779">	    e2.setDoj(doj2);</span>
<span class="fc" id="L780">	    e2.setPassword(&quot;password&quot;);</span>
	    
<span class="fc" id="L782">	    ec2.setEmployee(e2);</span>
<span class="fc" id="L783">	    ec2.setLoanId(lc2);</span>
<span class="fc" id="L784">	    ec2.setIssueDate(doj);</span>
	    
<span class="fc" id="L786">	    List&lt;EmployeeCard&gt; ecs2 = new ArrayList&lt;EmployeeCard&gt;();</span>
<span class="fc" id="L787">	    ecs2.add(ec2);</span>
	    
<span class="fc" id="L789">	    lc2.setEmployeeCard(ecs2);</span>
	    
<span class="fc" id="L791">	    List&lt;LoanCard&gt; list = new ArrayList&lt;LoanCard&gt;();</span>
<span class="fc" id="L792">	    list.add(lc1);</span>
<span class="fc" id="L793">	    list.add(lc2);</span>
	    
<span class="fc" id="L795">	    List&lt;String&gt; typelist=new ArrayList&lt;&gt;();</span>
	    
<span class="fc" id="L797">	    typelist.add(&quot;Crockery&quot;);</span>
<span class="fc" id="L798">	    typelist.add(&quot;Furniture&quot;);</span>
	    
<span class="fc" id="L800">	    Exception ex=new IllegalStateException();</span>
<span class="fc" id="L801">	    when(lservice.listAll()).thenThrow(ex);</span>
	    
<span class="fc" id="L803">	    ResponseEntity&lt;List&lt;String&gt;&gt; re=loanCardController.getLoanCardTypes();</span>
	    
<span class="fc" id="L805">	    assertEquals(re.getStatusCode(), HttpStatus.INTERNAL_SERVER_ERROR);</span>
<span class="fc" id="L806">	    assertNull(re.getBody());</span>
	    
<span class="fc" id="L808">	    verify(lservice, times(1)).listAll();</span>
		
<span class="fc" id="L810">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span>Ezloans-spring (02-Oct-2023 5:06:51 pm)</div></body></html>